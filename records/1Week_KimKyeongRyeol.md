## Title: [1Week] 김경렬

### 미션 요구사항 분석 & 체크리스트

---

매 주 제공되는 미션 별 요구사항을 기반으로 기능에 대한 분석을 진행한 후, 아래와 같은 체크리스트를 작성합니다.

- ‘어떻게 개발을 진행 할 것인지에 대한 방향성’을 확인하는 과정이기 때문에 최대한 깊이있게 분석 후 진행해주시기 바랍니다.


### 1주차 미션 요약

---

**[접근 방법]**

* 호감 삭제를 구현 시, JPA의 delete()가 작동이 안되는 문제 발생(SQL문 자체가 생성이 안됨)
  1. deleteById()는 되는지 확인 &rarr; 똑같이 무반응(SQL문 자체가 생성X)
  2. 디버깅으로 삭제할 데이터를 제대로 찾아왔는지 확인 &rarr; 제대로 찾음
  3. JPQL로 delete()를 만들면 작동이 되는지 확인 &rarr; 작동됨!
  4. 하지만 아직도 기본 내장 delete()는 작동 하지 않음
  5. 마지막으로 트랜잭션 문제인지 확인
  > **해결 방법**<br><br>서비스 클래스에 @Transactional(readOnly = true) 속성을 false로 바꿔주니 해결됨.<br>읽기 전용 모드였기에 수정/삭제 같은 작업이 안되었던 것<br><br>그렇다면 왜 JPQL로 했을 땐 실행이 된 것인가?<br>&rarr; @Query를 달면 영속성 컨테이너를 거치지 않고, 직접 데이터베이스로 질의작성을 하기 때문이다!<br><br> 만약 JPQL로 삭제를 구현한다면, 영속성 컨테이너와 데이터베이스 간의 데이터 일치성에 문제가 생길 수 있다. 그러므로 삭제하기 전, 영속성 컨테이너에서 먼저 조회 후 삭제를 진행해야한다!<br>이 부분은 영속성 컨테이너와 EntityManager를 더욱 자세히 공부해야겠다.


**[특이사항]**


구현 과정에서 아쉬웠던 점 / 궁금했던 점을 정리합니다.

- 추후 리팩토링 시, 어떤 부분을 추가적으로 진행하고 싶은지에 대해 구체적으로 작성해주시기 바랍니다.

  **참고: [Refactoring]**

    - Refactoring 시 주로 다루어야 할 이슈들에 대해 리스팅합니다.
    - 1차 리팩토링은 기능 개발을 종료한 후, 스스로 코드를 다시 천천히 읽어보면서 진행합니다.
    - 2차 리팩토링은 피어리뷰를 통해 전달받은 다양한 의견과 피드백을 조율하여 진행합니다.